# 基于多Agent协同的对话式血糖健康管理助手需求文档

## 1. 应用概述

### 1.1 应用名称
血糖健康管理助手

### 1.2 应用描述
一款以自然语言对话为核心交互方式的智能健康管理应用，用户通过与助手对话完成血糖数据记录、分析、咨询等健康管理任务。背后由多个专业Agent协同工作，提供精准、及时、个性化的血糖管理支持。\n
## 2. 核心功能

### 2.1 对话协调Agent（前台核心）\n- 统一对话接口：用户的所有交互通过该Agent完成
- 意图识别与情感感知：理解用户话语背后的深层需求（咨询、记录、预警、寻求安慰等）\n- 对话状态管理：维护多轮对话的上下文，记住当前讨论主题
- 任务分解与路由：将复杂请求拆解，调用相应的专业Agent获取信息或执行任务
- 回复生成与风格化：将各Agent的专业回复整合成自然、友好、统一的对话语言，并适应用户偏好（简洁型或详细型）\n- 分析展示组件：在生成回复前，显示「分析中...」和「检索医学循证知识库中...」的视觉效果，持续2秒，模拟真实的分析过程

### 2.2 数据记录Agent
- 触发场景：用户报告血糖数值、饮食、运动等健康数据
- 功能：结构化提取信息（数值、时间、食物类型等），存入数据库
- 示例触发语句：我刚测了血糖，7.8、我午餐吃了牛肉面

### 2.3 即时分析Agent
- 触发场景：用户提供新数据后，或询问数据解读相关问题
- 功能：结合历史数据进行快速解读，提供个性化的分析结果
- 示例回复：餐后2小时7.8，对于您来说控制得不错，比上周平均值低了0.5

### 2.4 教育科普Agent
- 触发场景：用户询问概念性问题或系统检测到知识盲区
- 功能：用通俗易懂的语言解释医学概念，并关联到用户自身情况
- 示例触发语句：什么是GI值？\n
### 2.5 激励与情感支持Agent
- 触发场景：用户表达沮丧、焦虑情绪，或达成目标时
- 功能：提供共情、鼓励，并强调积极进展
- 示例回复：看到您最近一周的早餐后血糖都很平稳，这是巨大的进步！偶尔波动很正常，我们一起来看看怎么调整

### 2.6 建议效果跟踪Agent
- 触发场景：用户反馈执行建议后的结果和感受
- 功能：记录用户对之前建议的执行效果评价，包括效果好坏、具体反馈内容
- 数据存储：将反馈信息与对应建议关联存储，建立建议-反馈闭环数据库
- 智能学习：基于用户反馈优化后续建议质量和个性化程度
- 示例触发语句：我按照你说的吃了苹果，血糖确实降下来了、为什么我照做了血糖还是没改善

### 2.7 智能建议优化Agent
- 触发场景：基于建议效果跟踪数据，定期优化建议策略
- 功能：分析用户反馈模式，识别有效建议特征，调整建议生成逻辑
- 自我学习：从历史反馈中提炼规律，提升建议的准确性和实用性
- 个性化定制：根据不同用户的反馈偏好，调整建议的详细程度和表达方式

### 2.8 历史聊天记录查询Agent
- 触发场景：用户需要查找以往的对话内容
- 功能：提供按日期查询历史聊天记录的功能
- 界面设计：显示日历选择器，用户可选择具体日期查看该日的完整对话记录
- 查询结果：以时间顺序展示当日所有对话内容，包括用户输入和助手回复
- 示例触发语句：我想看看上周三的对话、请显示12月10日的聊天记录
- 参考界面：使用用户提供的图片image.png作为界面设计参考

### 2.9 语音输入功能
- 语音识别Agent：调用语音识别相关大模型，将用户语音输入实时转换为文字
- 功能特性：支持连续语音输入，自动识别语音暂停，转换准确率不低于95%\n- 交互体验：语音输入时显示麦克风状态指示器，转换过程中显示「识别中...」，转换完成后自动聚焦文本输入框
- 适用场景：用户可选择语音方式进行更快捷的健康数据录入和咨询交互

## 3. 管理后台功能

### 3.1 Agent工作流监控
- 实时展示各个Agent的运行状态和工作流程
- 可视化展示Agent之间的调用关系和数据流向
- 支持查看历史工作流记录和状态变更

### 3.2 日志管理
- 自动生成Agent调用日志，包含调用时间、调用参数、返回结果等
- 支持按时间、Agent类型、调用结果等条件筛选日志
- 提供日志导出功能（CSV、JSON格式）\n
### 3.3 多智能体调用分析
- 统计各Agent的调用频率、响应时间等性能指标
- 生成智能体调用关系图表，帮助理解系统架构
- 支持异常调用记录查看和问题定位
- 提供调用趋势分析和性能报告

### 3.4 用户交互监控
- 展示用户对话记录和Agent回复内容
- 支持按用户、时间段、对话主题筛选
- 提供对话质量评估和改进建议

### 3.5 建议效果数据分析
- 可视化展示各类建议的执行效果统计
- 支持按用户分组分析建议接受度
- 提供详细的反馈内容检索和分析工具
- 生成建议优化报告，指导Agent模型迭代

## 4. 视觉升级实施计划

### 4.1 设计系统重构
- 色彩体系升级：建立全新的配色方案，采用更具活力的专业蓝调色板，增强视觉层次感
- 圆角规范：统一圆角半径标准，营造现代友好的视觉体验
- 动画效果：引入流畅的过渡动画，提升界面交互的生动性
- 响应式网格：优化布局结构，确保在各种设备上的完美适配

### 4.2 页面逐级优化
- 按模块分阶段进行视觉升级，优先核心功能区域
- 保持功能稳定性，逐个页面实施并测试
- 确保每次更新后功能正常运行

### 4.3 测试与验证
- 每个阶段完成后进行全面测试
- 包含功能测试、兼容性测试、性能测试
- 收集用户反馈进行迭代优化

### 4.4 整体优化
- 完成逐页升级后进行全局视觉优化
- 统一设计语言，增强视觉一致性
- 进行细节打磨，达到Dribbble级别的视觉效果

## 5. 设计风格
- 配色方案：以专业的深蓝色为主色调，搭配清爽的白色和浅灰色背景，营造科技感与专业性的管理界面
- 视觉细节：采用现代扁平化设计风格，清晰的线条分割，简洁的数据可视化图表
- 整体布局：采用仪表板式布局，重要指标以卡片形式展示，表格和图表层次分明，便于快速获取信息